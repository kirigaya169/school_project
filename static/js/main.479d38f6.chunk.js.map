{"version":3,"sources":["history.js","config.js","store/subjectStore.js","store/userStore.js","components/registrationForm.js","components/requestForm.js","components/main.js","components/admin/userCard.js","components/admin/users.js","components/admin/requestCard.js","components/admin/requests.js","components/admin/index.js","components/loginForm.js","store/themeStore.js","components/themeSwitch.js","components/notificationsView.js","components/navBar.js","App.js","index.js"],"names":["createBrowserHistory","serverHost","subjectStore","this","subjects","axios","get","then","response","sendSubjects","makeAutoObservable","data","subj","i","length","push","value","isAuth","user","token","load","makeObservable","setUser","action","setIsAuth","store","save","firstRun","autorun","json","JSON","stringify","toJS","autoSave","bind","auth","jwt_decode","notifications","count","notification","key","snackbars","filter","snackbar","snacks","sessionStorage","getItem","parse","extendObservable","removeSnackbar","observable","headers","setNotifications","col","readed","setCount","catch","e","socket","io","emit","email","on","addCount","message","text","options","Date","getTime","Math","random","setItem","Alert","props","elevation","variant","RegistrationForm","observer","handleInput","handleSubmit","successSend","handleSubject","handleClass","state","name","password","vk_ref","roles","all_subjects","error_text","succees_text","_class","photo","classes","style","marginBottom","formStyle","margin","minWidth","errorMessage","successMessage","setState","userStore","event","target","a","preventDefault","formData","FormData","append","post","error","console","log","files","onSubmit","Snackbar","open","autoHideDuration","onClose","reason","severity","Box","textAlign","mt","Typography","gutterBottom","borderColor","border","width","px","pb","borderRadius","mx","TextField","marginRight","id","label","onChange","fullWidth","type","FormControl","InputLabel","Select","labelId","map","MenuItem","display","mb","handleMenu","marginLeft","autoWidth","multiple","input","Input","renderValue","selected","flexWrap","Chip","subject","Button","color","React","Component","MIN_CLASS","MAX_CLASS","useStyles","makeStyles","theme","root","spacing","field","marginTop","button","RequestForm","dt","useState","setTheme","description","setDescription","setSubject","getFullYear","getMonth","getDay","getHours","getMinutes","date","setDate","setMessage","sendData","status","handleClose","className","noValidate","p","multiline","Grid","container","item","xs","DateTimePicker","clearable","onClick","useRowStyles","borderBottom","Row","lesson","setOpen","Fragment","TableRow","TableCell","IconButton","size","component","scope","title","align","toLocaleString","year","month","day","hour","minute","second","hour12","teacher_name","pupil_name","paddingBottom","paddingTop","colSpan","Collapse","in","timeout","unmountOnExit","MainPage","lessons","setLessons","isLoading","setIsLoading","useEffect","lessons_data","sort","b","my","TableContainer","Paper","Table","TableHead","height","justifyContent","alignItems","CircularProgress","fontSize","includes","isAdmin","setIsAdmin","changeAdminRole","m","Card","CardContent","class","CardActions","users","setUsers","getUsers","formControl","RequestDialog","request","setIsDeleted","accept","setAccept","teacher","setTeacher","teachers","setTeachers","params","onReject","_id","onAccept","onAcceptButton","Dialog","aria-labelledby","DialogTitle","DialogContent","DialogContentText","tch","DialogActions","dialogOpen","setDialogOpen","isDeleted","author","requests","setRequests","getRequests","drawer","flexShrink","drawerPaper","drawerContainer","overflow","content","flexGrow","padding","AdminPanel","current","setCurrent","Drawer","paper","zIndex","Toolbar","List","ListItem","ListItemIcon","ListItemText","LoginForm","withStyles","backgroundColor","createMuiTheme","check","setCheck","Switch","checked","themeStore","palette","primary","main","contrastText","secondary","inputProps","popper","tooltip","list","maxHeight","displayed","useSnackbar","enqueueSnackbar","closeSnackbar","forEach","anchorEl","setAnchorEl","dateString","getUTCFullYear","getUTCMonth","slice","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","ClickAwayListener","onClickAway","currentTarget","Badge","badgeContent","max","Popper","Boolean","transition","anchorOrigin","vertical","horizontal","TransitionProps","Fade","reverse","elem","Divider","menuButton","NavBar","AppBar","position","Link","BrowserLink","to","aria-label","Menu","keepMounted","App","ThemeProvider","Container","maxWidth","path","ReactDOM","render","StrictMode","basename","utils","DateFnsUtils","document","getElementById"],"mappings":"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","file":"static/js/main.479d38f6.chunk.js","sourcesContent":["import { createBrowserHistory } from 'history';\n\nvar history = createBrowserHistory();\n\nexport default history;","const serverHost =\"https://shestuha.herokuapp.com/\";\n//const serverHost =\"http://127.0.0.1:8000/\";\n//console.log(process.env);\nexport default serverHost;","import {makeAutoObservable} from 'mobx';\nimport axios from 'axios';\nimport serverHost from '../config';\n\nexport class SubjectStore{\n    constructor() {\n        this.subjects = [];\n        axios.get(serverHost + 'api/subjects').then((response) =>{\n            this.sendSubjects(response);\n        });\n        makeAutoObservable(this);\n    }\n\n    setSubjects(subjects){\n        this.subjects = subjects;\n    }\n\n    sendSubjects(response){\n        var subjects = response.data.subjects;\n        var subj = [];\n        for (var i = 0; i < subjects.length; i++){\n            subj.push(subjects[i].value);\n        }\n        this.subjects = subj;\n    }\n}\nvar subjectStore = new SubjectStore();\n\nexport default subjectStore;","import jwt_decode from 'jwt-decode';\nimport {makeObservable, action, observable, extendObservable, autorun, toJS} from 'mobx'\nimport axios from 'axios';\nimport serverHost from '../config';\nimport io from 'socket.io-client';\n\nfunction autoSave(store, save) {\n    let firstRun = true;\n    autorun(() => {\n        const json = JSON.stringify(toJS(store));\n        if (!firstRun){\n            save(json);\n        }\n        firstRun = false;\n    });\n}\n\nexport class UserStore{\n    isAuth = false;\n    user = {};\n    token = '';\n\n    constructor(){\n        this.load();\n        makeObservable(this, {\n            setUser: action,\n            setIsAuth: action,\n        })\n        \n        autoSave(this, this.save.bind(this));\n    }\n\n    setIsAuth(auth) {\n        this.isAuth = auth;\n    }\n\n    setUser(token){\n        if (token){\n            this.token = token;\n            this.user = jwt_decode(token);\n            //console.log(this.user);\n        }\n        else{\n            this.user = {};\n            this.token = '';\n        }\n    }\n    \n    setNotifications(notifications){\n        //console.log(\"not\", notifications);\n        this.notifications = notifications;\n    }\n\n    setCount(count){\n        this.count = count;\n    }\n\n    addCount(count){\n        this.count += count;\n    }\n    \n    setNotification(notification){\n        this.notification = notification;\n    }\n\n    removeSnackbar(key) {\n        this.snackbars = this.snackbars.filter(snackbar => snackbar.key !== key);\n    }\n\n    setSnackbars(snacks){\n        this.snackbars = snacks;\n    }\n\n    load() {\n        if (sessionStorage.getItem('user-store')){\n            const data = JSON.parse(sessionStorage.getItem('user-store'));\n            //console.log(data);\n            data.count = 0;\n            data.notifications = [];\n            data.notification = null;\n            data.snackbars = [];\n            extendObservable(this, {...data, removeSnackbar: action});\n        }\n        else {\n            makeObservable(this, {\n                isAuth: observable,\n                user: observable,\n                token: observable,\n                count: observable,\n                notifications: observable,\n                notification: observable,\n                snackbars: observable,\n                removeSnackbar: action,\n            })\n        }\n\n        axios.get(serverHost + 'api/user/notifications', {headers: {\n            'Authorization': \"Baerar \" + this.token,\n          }}).then(data => {\n            //console.log(\"init\", data.data.notifications);\n            this.setNotifications(data.data.notifications);\n            var col = 0;\n            for (var i = 0; i < this.notifications.length; i++){\n                if (!this.notifications[i].readed) col++;\n            }\n            this.setCount(col);\n\n          }).catch(e => {\n            //console.log(e.response);\n          })\n          const socket = io(serverHost);\n        //console.log(socket);\n        socket.emit(\"join\",  {user: this.user.email});\n        socket.on(\"notification\", data => {\n            //console.log(\"store \", this.notifications);\n            this.notification = data;\n            //console.log(data);\n            this.notifications.push(data);\n            this.addCount(1);  \n            this.snackbars.push({\n                message: data.text,\n                options: {\n                    //persist: true,\n                    \n                },\n                key: new Date().getTime() + Math.random(),\n            });\n            //console.log(\"store snack\", this.snackbars);\n        })\n        \n    }\n\n    save(json){\n        sessionStorage.setItem('user-store', json);\n    }\n}\n\n\n\nexport default new UserStore();","import React from 'react'\nimport {TextField, Button, Snackbar, MenuItem, FormControl, Select, InputLabel, Input, Chip, Box, Typography} from '@material-ui/core'\nimport MuiAlert from '@material-ui/lab/Alert'\nimport axios from 'axios'\nimport {observer} from 'mobx-react'\nimport history from '../history.js';\nimport subjectStore from '../store/subjectStore.js';\nimport serverHost from '../config.js';\nimport userStore from '../store/userStore.js';\n\nfunction Alert(props) {\n    return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n  }\n\nconst RegistrationForm = observer(\n    class RegistrationForm extends React.Component{\n\n        static MIN_CLASS = 1;\n        static MAX_CLASS = 11;\n\n        constructor(props){\n            super(props);\n            this.subjects = [];\n            this.handleInput = this.handleInput.bind(this);\n            this.handleSubmit = this.handleSubmit.bind(this);\n            //this.hadnleMenu = this.handleMenu.bind(this);\n            this.successSend = this.successSend.bind(this);\n            this.sendSubjects = this.sendSubjects.bind(this);\n            this.handleSubject = this.handleSubject.bind(this);\n            this.handleClass = this.handleClass.bind(this);\n            \n            this.state = {\n                name: '',\n                email: '',\n                password: '',\n                vk_ref: '',\n                roles: '',\n                subjects: [],\n                all_subjects: [],\n                error_text: '',\n                succees_text: '',\n                _class: 5,\n                photo: null,\n            }\n            \n            this.classes = [5, 6, 7, 8, 9, 10];\n            axios.get(serverHost + 'api/subjects').then((response) =>{\n                this.sendSubjects(response);\n            });\n            this.style = {\n                marginBottom: '10px',\n            }\n            this.formStyle = {\n                margin:'10px',\n                minWidth: 70,\n            }\n            this.errorMessage = '';\n            this.successMessage = '';\n        }\n\n        sendSubjects(response){\n            //console.log('data', response.data);\n            this.subjects = response.data.subjects;\n            var subj = [];\n            for (var i = 0; i < this.subjects.length; i++){\n                subj.push(this.subjects[i].value);\n            }\n            this.setState({all_subjects: subj});\n            //console.log(\"subjects\", this.subjects);\n        }\n\n        successSend(response){\n            //onsole.log(\"handle\", this.context);\n            //console.log(response.data);\n            userStore.setUser(response.data.token);\n            userStore.setIsAuth(true);\n            //console.log(\"success\", this.context);\n            this.setState({succees_text: \"Запись успешно создана\"});\n        }\n\n        handleClass(event){\n            this.setState({_class: event.target.value});\n        }\n\n        async handleSubmit(event){\n            //console.log(\"submit\", this.context);\n            event.preventDefault();\n            const formData = new FormData();\n            var sendData = {\n                'name': this.state.name,\n                'email': this.state.email,\n                'password': this.state.password,\n                'vk_ref': this.state.vk_ref,\n                'roles': this.state.roles,\n                'subjects': this.state.subjects,\n                '_class': this.state._class,\n            }\n            formData.append('name', this.state.name);\n            formData.append('email', this.state.email);\n            formData.append('password', this.state.password);\n            formData.append('roles', this.state.roles);\n            formData.append('subjects', this.state.subjects);\n            formData.append('_class', this.state._class);\n            formData.append('avatar', this.state.photo);\n            //console.log(\"process\", process.env.REACT_APP_SERVER_HOST);\n            axios.post(serverHost + \"api/user/registration\", formData   \n            ).then((response) => {\n                this.successSend(response);\n                \n            }).catch((error) => {\n                console.log(\"error\", error);\n                this.setState({error_text: error.response.data.data});\n                this.errorMessage = error.response.data;\n            })\n        }\n\n        handleInput(event){\n            var target = event.target;\n            var value = target.value;\n            var name = target.name;\n            this.setState({\n                [name]: value\n            })\n        }\n\n        handleMenu(event){\n            this.setState({roles: event.target.value});\n            //console.log(\"menu\", this.state.roles[0]);\n        }\n\n        handleSubject(event){\n            const { value: options } = event.target;\n            //console.log(event);\n            var value = [];\n            for (var i = 0; i < options.length; i++){\n                value.push(options[i]);\n            }\n            this.setState({\n                subjects: value\n            });\n            //console.log(this.state);\n        }\n\n        handlePhoto(event){\n            this.setState({photo: event.target.files[0]});\n        }\n\n        render(){\n            //console.log(this.subjects);\n            //console.log(process.env.REACT_APP_SERVER_HOST);\n            //console.log(\"render\", this.context);\n            var classes = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11];\n            return (<form onSubmit={this.handleSubmit} >\n                <Snackbar open={this.state.error_text !== ''} autoHideDuration={6000} onClose={(event, reason) => {\n                    if (reason === 'clickaway') {   \n                return;\n                }\n                this.setState({\n                    error_text: '',\n                });\n                }}>\n                    <Alert severity=\"error\">\n                    {this.state.error_text}\n                    </Alert>\n                </Snackbar>\n                <Box textAlign=\"center\" mt={2}  >\n                    <Typography variant=\"h2\" gutterBottom>\n                        Sign in\n                    </Typography>\n                </Box>\n                <Box textAlign=\"center\" borderColor=\"grey.400\" border={1} width=\"500px\" px={2} pb={2} borderRadius={16} mx=\"auto\">\n                    \n                    <div>\n                        <TextField variant=\"outlined\" margin=\"normal\" style={{marginRight: 5, width: \"49.5%\"}} name=\"name\" id=\"name\" label=\"Имя\" value={this.state.name} onChange={this.handleInput} />\n                        <TextField variant=\"outlined\" margin=\"normal\" style={{width: \"49.5%\"}} name=\"email\" id=\"email\" label=\"Email\" value={this.state.email} onChange={this.handleInput} />\n                    </div>\n                    <div>\n                    <TextField variant=\"outlined\" fullWidth margin=\"normal\" style={this.style} name=\"password\" id=\"password\" label=\"Password\" type=\"password\" value={this.state.password} onChange={this.handleInput} />\n                    </div>\n                    <Box textAlign=\"start\">\n                    <div>\n                        <FormControl variant=\"outlined\" style={this.formStyle} id=\"class\" >\n                        <InputLabel id=\"class_label\">Класс</InputLabel>\n                        <Select labelId=\"class_label\" label=\"Класс\" style={this.style} value={this.state._class} onChange={this.handleClass}>\n                            {classes.map((_class) => (\n                                <MenuItem key={_class} value={_class}>{_class}</MenuItem>\n                            ))}\n                        </Select>\n                        </FormControl>\n                    </div>\n                    <Box display=\"flex\" mb={2}>\n                    <FormControl variant=\"outlined\" style={{width: 150}} id=\"role\" >\n                    <InputLabel>Роль</InputLabel>\n                    \n                    <Select label=\"Роль\" style={this.style} value={this.state.roles} onChange={this.handleMenu.bind(this)}>\n                        <MenuItem value=\"USER\">Ученик</MenuItem>\n                        <MenuItem value=\"TEACHER\">Учитель</MenuItem>\n                    </Select>\n                    </FormControl>\n                    { (this.state.roles == \"TEACHER\") && \n                    <FormControl variant=\"outlined\" id=\"subject\" style={{marginLeft: 10, width: \"100%\"}}>\n                    <InputLabel>Предметы</InputLabel>\n                        <Select\n                        label=\"Предмет\"\n                        autoWidth\n                        \n                        multiple\n                        onChange={this.handleSubject}\n                        value={this.state.subjects}\n                        input={<Input/>}\n                        renderValue= {(selected) => (\n                            <div style={{display: \"flex\", flexWrap: \"wrap\"}}>\n                            {selected.map((value) => (\n                                <Chip key={value} label={value} />\n                            ))}\n                            </div>\n                        )} >\n                            {subjectStore.subjects.map((subject) => (\n                                <MenuItem key={subject} value={subject}>\n                                    {subject}\n                                </MenuItem>\n                            ))}\n                        </Select>\n                    </FormControl>\n                    }\n                    </Box>\n                    </Box>\n                    <div>\n                        <Button variant=\"contained\" color=\"primary\" type=\"submit\">\n                            Зарегестрироваться\n                        </Button>\n                    </div>\n                </Box>\n            </form>)\n        }\n})\n\n\nexport default RegistrationForm;","import React, { useContext } from 'react';\nimport axios from 'axios';\nimport {observer} from 'mobx-react';\nimport {TextField, FormControl, Select, InputLabel, MenuItem, Button, Snackbar, Box, Typography, Grid} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport {DateTimePicker} from '@material-ui/pickers';\nimport MuiAlert from '@material-ui/lab/Alert';\nimport subjectStore from '../store/subjectStore.js';\nimport serverHost from '../config.js';\nimport userStore from '../store/userStore.js';\n\nfunction Alert(props) {\n  return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n}\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    '& > *': {\n      margin: theme.spacing(1),\n    },\n  },\n  field: {\n    marginTop: theme.spacing(1),\n  },\n  button: {\n    marginTop: theme.spacing(1),\n  }\n}));\n\nvar RequestForm = observer(function(props){\n    const classes = useStyles();\n    var dt = new Date();\n    const [theme, setTheme] = React.useState('');\n    const [description, setDescription] = React.useState('');\n    const [subject, setSubject] = React.useState('');\n    const [date, setDate] = React.useState(new Date(dt.getFullYear(), dt.getMonth(), dt.getDay(), dt.getHours(), dt.getMinutes()));\n    const [message, setMessage] = React.useState('');\n    //var defaultDate = dt.getFullYear() + '-' + dt.getMonth() + '-' + dt.getDay() + ' ' + dt.getHours() + ':' + dt.getMinutes();\n    \n    var sendData = async () => {\n        var formData = new FormData();\n        formData.append('title', theme);\n        formData.append('description', description);\n        formData.append('subject', subject);\n        formData.append('date', date);\n        try{\n          var data = await axios.post(serverHost + 'api/requests/', formData, {\n            headers: {\n              'Authorization': 'Baerar ' + userStore.token, \n            }\n          });\n          setMessage(data.data.data);\n        }\n        catch(e){\n          if (e.response.status == \"403\"){\n            userStore.setIsAuth(false);\n          }\n          console.log(e);\n        }\n        \n    }\n\n    const handleClose = (event, reason) => {\n      if (reason === 'clickaway') {\n        return;\n      }\n  \n      setMessage('');\n    };\n\n    return (\n        <form className={classes.root} noValidate>\n        <Snackbar open={message} autoHideDuration={6000} onClose={handleClose}>\n        <Alert onClose={handleClose} severity=\"success\">\n          {message}\n        </Alert>\n        </Snackbar>\n        <Box textAlign=\"center\">\n        <Typography variant=\"h2\">\n          Подать заявку\n        </Typography>\n        <Box mt={3} border={1} borderColor=\"grey.300\" width=\"30%\" mx=\"auto\" borderRadius={20} p={3}>\n        <div>\n          <TextField fullWidth label=\"Тема\" value={theme} onChange={(e) => {\n            //console.log(e);\n            setTheme(e.target.value);\n          }}></TextField>\n          </div>\n          <div>\n          <TextField fullWidth multiline   label=\"Описание\" value={description} onChange={(e) => {\n            setDescription(e.target.value);\n          }}></TextField>\n          </div>\n          <Grid container spacing={3}>\n          <Grid className={classes.field} item xs={6}>\n          <FormControl fullWidth>\n          <InputLabel id=\"subject\">Предмет</InputLabel>\n            <Select\n            labelId=\"subject\"\n            value={subject}\n            onChange={(e) => {\n              setSubject(e.target.value);\n            }}\n            >\n            {subjectStore.subjects.map((subject) => (\n              <MenuItem key={subject} value={subject}>{subject}</MenuItem>\n            ))}\n            </Select>\n          </FormControl>\n          \n          </Grid>\n          <Grid  item xs={6}>\n          <DateTimePicker\n          style={{marginTop: 24}}\n          fullWidth\n          margin=\"auto\"\n          clearable\n          value={date}\n          onChange={setDate}>\n          </DateTimePicker>\n          </Grid>\n          </Grid>\n            <Button\n              className={classes.button}\n              color=\"primary\"\n              variant=\"contained\"\n              onClick={sendData}\n              >\n              Отправить\n            </Button>\n            </Box>\n          </Box>\n        </form>\n      );\n});\n\nexport default RequestForm;\n","import React from 'react';\nimport axios from 'axios';\nimport {Typography, TableRow, TableCell, IconButton, Table, TableContainer, TableHead, TableBody, Paper, Collapse, Box, CircularProgress} from '@material-ui/core';\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\nimport KeyboardArrowUpIcon from '@material-ui/icons/KeyboardArrowUp';\nimport { makeStyles } from '@material-ui/core/styles';\nimport serverHost from '../config';\n\nconst useRowStyles = makeStyles({\n    root: {\n      '& > *': {\n        borderBottom: 'unset',\n      },\n    },\n  });  \n\nconst Row = (props) => {\n    const classes = useRowStyles();\n    const {lesson} = props;\n    const [open, setOpen] = React.useState(false);\n    const time_options = {\n        year: 'numeric', month: 'numeric', day: 'numeric',\n        hour: 'numeric', minute: 'numeric', second: 'numeric',\n        hour12: false\n      };\n    return (\n        <React.Fragment>\n            <TableRow className={classes.root}>\n                <TableCell>\n                    <IconButton size=\"small\" onClick={() => {setOpen(!open)}}>\n                        {open ? <KeyboardArrowUpIcon /> : <KeyboardArrowDownIcon />}\n                    </IconButton>\n                </TableCell>\n                <TableCell component=\"th\" scope=\"row\">{lesson.title}</TableCell>\n                <TableCell align=\"right\">{lesson.subject}</TableCell>\n                <TableCell align=\"right\">{new Date(lesson.date).toLocaleString(time_options)}</TableCell>\n                <TableCell align=\"right\">{lesson.teacher_name}</TableCell>\n                <TableCell align=\"right\">{lesson.pupil_name}</TableCell>\n            </TableRow>\n            <TableRow>\n                <TableCell style={{ paddingBottom: 0, paddingTop: 0 }} colSpan={6}>\n                    <Collapse in={open} timeout=\"auto\" unmountOnExit>\n                        <Box margin={1}>\n                            <Typography variant=\"h6\" gutterBottom component=\"div\">\n                                Описание\n                            </Typography>\n                            <Typography component=\"div\">\n                                {lesson.description}\n                            </Typography>\n                        </Box>\n                    </Collapse>\n                </TableCell>\n            </TableRow>\n        </React.Fragment>\n    )\n}\n\nexport default function MainPage(){\n\n    const [lessons, setLessons] = React.useState([]);\n    const [isLoading, setIsLoading] = React.useState(false);\n\n    React.useEffect(async() => {\n        await axios.get(serverHost + 'api/lessons/').then(data => {\n            var lessons_data = data.data.lessons;\n            lessons_data.sort(function(a, b){\n                return new Date(b.date) - new Date(a.date);\n            });\n            setLessons(lessons_data);\n            setIsLoading(true);\n        }).catch(e => {\n            console.log(e);\n        });\n    }, []);\n    //console.log(lessons);\n    return(\n        <div>\n            <Box textAlign=\"center\" my={2.5}>\n                <Typography  variant=\"h2\">\n                ♂Bondage gay website♂\n                </Typography>\n            </Box>\n\n            {isLoading ? <TableContainer component={Paper}>\n                <Table>\n                    <TableHead>\n                        <TableRow>\n                            <TableCell />\n                            <TableCell>\n                                Название\n                            </TableCell>\n                            <TableCell align=\"right\">\n                                Предмет\n                            </TableCell>\n                            <TableCell align=\"right\">\n                                Дата\n                            </TableCell>\n                            <TableCell align=\"right\">\n                                Учитель\n                            </TableCell>\n                            <TableCell align=\"right\">\n                                Ученик\n                            </TableCell>\n                        </TableRow>\n                    </TableHead>\n                    {lessons.map((lesson) => (\n                        <Row lesson={lesson} key={lesson.title}/>\n                    ))}\n                </Table>\n            </TableContainer> : <Box display=\"flex\" height=\"80vh\" justifyContent=\"center\" alignItems=\"center\"><CircularProgress /></Box>}\n        </div>\n    )\n}","import React from 'react';\nimport {Card, Typography, CardContent, CardActions, Box, Chip, Button} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport axios from 'axios';\nimport userStore from '../../store/userStore.js';\nimport { observer } from 'mobx-react'\nimport serverHost from '../../config.js';\n\nconst useStyles = makeStyles({\n    root: {\n        minWidth: 275,\n    },\n    title: {\n        fontSize: 14,\n    },\n\n})\n\nexport default observer(function UserCard(props){\n    const classes = useStyles();\n    const user = props.user;\n    const [isAdmin, setIsAdmin] = React.useState(user.roles.includes(\"ADMIN\"));\n    const changeAdminRole = async() => {\n        try{\n            const data = await axios.post(serverHost + 'api/user/change_role', {email: user.email},\n            {\n                headers: {\n                    'Authorization': 'Baerar ' + userStore.token,\n                }\n            });\n            setIsAdmin(data.data.data);\n        }\n        catch(e) {\n            //console.log(e.response);\n            if (e.response.status == \"403\"){\n                userStore.setIsAuth(false);\n            }\n        }\n    }\n    return (\n    <Box m={1}>\n        <Card className={classes.root}>\n            <CardContent>\n                <Typography component=\"h2\" variant=\"h5\" gutterBottom>\n                    {user.name} {isAdmin && <Chip size=\"small\" label=\"Админ\"/>}\n                </Typography>\n                <Typography component=\"h3\" gutterBottom>\n                    {user.roles.includes(\"TEACHER\") ? \"Учитель\" : \"Ученик\"}\n                </Typography>\n                <Typography classes={classes.title} color=\"textSecondary\">\n                    Информация:\n                </Typography>\n                <Typography classes={classes.title} color=\"textSecondary\">\n                    Класс: {user.class}\n                </Typography>\n                <Typography classes={classes.title} color=\"textSecondary\">\n                    Почта: {user.email}\n                </Typography>\n            </CardContent>\n            <CardActions>\n                <Button \n                    size=\"small\"\n                    color=\"primary\"\n                    onClick={changeAdminRole}\n                    >\n                    {isAdmin ? \"Удалить роль админа\" : \"Сделать админом\"}\n                    </Button>\n            </CardActions>\n        </Card>\n    </Box>\n    )\n})","import React from 'react';\nimport axios from 'axios';\nimport { observer } from 'mobx-react';\nimport {Typography, Box, CircularProgress} from '@material-ui/core'\nimport userStore from '../../store/userStore.js';\nimport UserCard from './userCard.js';\nimport serverHost from '../../config.js';\n\nconst sleep = (milliseconds) => {\n    return new Promise(resolve => setTimeout(resolve, milliseconds))\n  }\n\nexport default observer(function(props) {\n    const [users, setUsers] = React.useState([]);\n    const [isLoading, setIsLoading] = React.useState(false);\n    const getUsers = async() => {\n    axios.get(serverHost + 'api/user/', {\n        headers: {\n            'Authorization' : 'Baerar ' + userStore.token},\n    }).then(data => {\n        setUsers(data.data.users);\n        setIsLoading(true);\n    }).catch(e => {\n        if (e.response.status == '403'){\n            //console.log(userStore.user);\n            userStore.setIsAuth(false);\n        }\n    })\n        \n    }\n    React.useEffect(() => {\n        //let mounted = true;\n        getUsers();\n        //return () => mounted = false;\n    }, [])\n\n    //console.log(isLoading);\n    return (<div>\n        <Typography variant=\"h3\" component=\"h2\" gutterBottom>\n            Роли пользователей\n        </Typography>\n        <div style={{width: '100%'}}>\n        {!isLoading ? <CircularProgress /> : \n            <Box display=\"flex\" justifyContent=\"left\" flexWrap=\"wrap\">\n                {users.map((user) => (\n                    <UserCard user={user}/>\n                ))}\n            </Box>}\n        </div>\n    </div>)\n})\n","import React from 'react';\nimport { Card, \n    Box, CardContent, CardActions, Typography, Button, Dialog, DialogTitle, \n    DialogContent, DialogContentText, DialogActions, FormControl, InputLabel, Select, MenuItem } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { observer } from 'mobx-react';\nimport axios from 'axios';\nimport userStore from '../../store/userStore';\nimport serverHost from '../../config';\n\nconst useStyles = makeStyles({\n    root: {\n        minWidth: 275,\n    },\n    title: {\n        fontSize: 14,\n    }, \n    formControl: {\n        minWidth: 200,\n    }\n})\n\nconst RequestDialog = function(props){\n    const classes = useStyles();\n    const {onClose, open, request, setOpen, setIsDeleted} = props;\n    const [accept, setAccept] = React.useState(true);\n    const [teacher, setTeacher] = React.useState('');\n    const [teachers, setTeachers] = React.useState([]);\n\n    React.useEffect(async() => {\n        try{\n            const data = await axios.get(serverHost + 'api/user/subject', {params: {subject: request.subject}});\n            setTeachers(data.data);\n        }\n        catch(e){\n            console.log(e);\n            if (e.response.status == '403'){\n                userStore.setIsAuth(false);\n            }\n        }\n    }, []);\n\n    const handleClose = () => {\n        onClose();\n    }\n\n    const onReject = async() => {\n        try{\n            const data = await axios.post(serverHost + 'api/requests/reject', null,\n            {\n                params: {\n                    id: request._id,\n                },\n                headers: {\n                    'Authorization': 'Baerar ' + userStore.token,\n                }\n            });\n            setOpen(false);\n            setIsDeleted(true);\n        }\n        catch(e){\n            console.log(e);\n            if (e.response.status == '403'){\n                userStore.setIsAuth(false);\n            }\n        }\n    }\n\n    const onAccept = () => {\n        setAccept(!accept);\n    }\n\n    const onChange = (e) => {\n        setTeacher(e.target.value);\n    }\n\n    const onAcceptButton = async() => {\n        //console.log(serverHost);\n        try{\n            const data = axios.post(serverHost + 'api/requests/accept', {email: teacher}, {\n                params:{\n                    id: request._id,\n                },\n                headers: {\n                    'Authorization': 'Baerar ' + userStore.token,\n                }\n            })\n            \n            setOpen(false);\n            setIsDeleted(true);\n        }\n        catch(e){\n            console.log(e);\n            if (e.response.status == '403'){\n                userStore.setIsAuth(false);\n            }\n        }\n    }\n    \n    //console.log(onReject);\n    return (<Dialog onClose={handleClose} aria-labelledby=\"title\" open={open}>\n        <DialogTitle id=\"title\">\n            {request.title}\n        </DialogTitle>\n        <DialogContent>\n            <DialogContentText>\n                Описание: {request.description}\n            </DialogContentText>\n            {!accept && <FormControl className={classes.formControl}>\n                <InputLabel id=\"choose_label\">Выбирите преподавателя</InputLabel>\n                <Select\n                labelId=\"choose_label\"\n                value={teacher}\n                onChange={onChange}>\n                    {teachers.map((tch) => (\n                        <MenuItem value={tch.email}>{tch.name}</MenuItem>\n                    ))}\n                </Select>\n            </FormControl>}\n        </DialogContent>\n        <DialogActions>\n        {accept ? (<div>\n            <Button onClick={onReject} color=\"secondary\">\n                Отклонить\n            </Button>\n            <Button onClick={onAccept} color=\"primary\">\n                Принять\n            </Button></div>) : <div>\n                <Button onClick={onAccept}>\n                    Отмена\n                </Button>\n                <Button onClick={onAcceptButton} color=\"primary\">\n                    Выбрать\n                </Button>\n            </div>}\n        </DialogActions>\n    </Dialog>)\n}\n\nexport default observer(function RequestCard(props){\n    const classes = useStyles();\n    const {request} = props;\n    const date = new Date(request.date);\n    const [dialogOpen, setDialogOpen] = React.useState(false);\n    const [isDeleted, setIsDeleted] = React.useState(false);\n    const time_options = {\n        year: 'numeric', month: 'numeric', day: 'numeric',\n        hour: 'numeric', minute: 'numeric', second: 'numeric',\n        hour12: false\n      };\n\n    const handleClose = () => {\n        setDialogOpen(false);\n    }\n    \n    return (<div>{isDeleted ? null :\n        <Box m={2}>\n            <Card className={classes.root}>\n                <CardContent>\n                    <Typography component=\"h2\" variant=\"h5\" gutterBottom>{request.title}</Typography>\n                    <Typography className={classes.title} color=\"textSecondary\">\n                        {`Дата: ${date.toLocaleString(time_options)}`}  \n                    </Typography>\n                    <Typography className={classes.title} color=\"textSecondary\">\n                        Предмет: {request.subject}\n                    </Typography>\n                    <Typography className={classes.title} color=\"textSecondary\">\n                        Автор: {request.author}\n                    </Typography>\n                </CardContent>\n                <CardActions>\n                    <Button size=\"small\" onClick={() => {\n                        setDialogOpen(true);\n                    }}>Подробнее</Button>\n                </CardActions>\n            </Card>\n            <RequestDialog setIsDeleted={setIsDeleted} setOpen={setDialogOpen}  open={dialogOpen} onClose={handleClose} request={request}/>\n        </Box>}\n        </div>\n    );\n})","import React from 'react';\nimport { Typography, Box, CircularProgress } from '@material-ui/core';\nimport userStore from '../../store/userStore';\nimport { observer } from 'mobx-react';\nimport axios from 'axios';\nimport RequestCard from './requestCard';\nimport serverHost from '../../config';\n\nexport default observer( function RequestsView(){\n    const [requests, setRequests] = React.useState([]);\n    const [isLoading, setIsLoading] = React.useState(false);\n\n    const getRequests = async() => {\n        axios.get(serverHost + 'api/requests/', {\n            headers: {\n                'Authorization': 'Baerar ' + userStore.token,\n            }\n        }).then(data => {\n            setRequests(data.data.requests);\n            setIsLoading(true);\n        }).catch(e => {\n            console.log(e);\n            if (e.response.status == '403'){\n                userStore.setIsAuth(false);\n            }\n        })\n    }\n\n    React.useEffect(() => {\n        getRequests();\n    }, []);\n\n    return (\n        <div>\n            <Typography variant=\"h3\" gutterBottom>\n                Заявки\n            </Typography>\n            {!isLoading && <CircularProgress />}\n            <Box display=\"flex\" justifyContent=\"left\" flexWrap=\"wrap\">\n                {requests.map((request) => (\n                    <RequestCard request={request}/>\n                ))}\n            </Box>\n        </div>\n    )\n})","import React from 'react'\nimport {Drawer, Toolbar, List, ListItem, ListItemText, ListItemIcon} from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport NotificationsIcon from '@material-ui/icons/Notifications';\nimport UserView from './users.js'\nimport RequestsView from './requests.js';\nimport userStore from '../../store/userStore.js';\n\nconst drawerWidth = 240;\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        display: 'flex',\n    },\n    drawer: {\n        width: drawerWidth,\n        flexShrink: 0,\n    },\n    drawerPaper: {\n        width: drawerWidth,\n    },\n    drawerContainer: {\n        overflow: 'auto',\n    },\n    content: {\n        flexGrow: 1,\n        padding: theme.spacing(3),\n    }\n}));\n\nexport default function AdminPanel(){\n    const classes = useStyles();\n    const [current, setCurrent] = React.useState(<UserView />);\n    return(\n        <div className={classes.root}>\n        <Drawer\n        className={classes.drawer}\n        classes={{\n            paper: classes.drawerPaper,\n        }}\n        variant=\"permanent\">\n        <div style={{\n            zIndex: 0,\n        }}>\n            <Toolbar />\n            <div className={classes.drawerContainer}>\n            <List>\n                <ListItem  button onClick={() => {\n                    setCurrent(<UserView />);\n                }}>\n                    <ListItemIcon><AccountCircleIcon /> </ListItemIcon>\n                    <ListItemText>Пользователи</ListItemText>\n                </ListItem>\n                <ListItem selected={current == <RequestsView />} button onClick={() => {\n                    setCurrent(<RequestsView />);\n                }}>\n                    <ListItemIcon><NotificationsIcon /> </ListItemIcon>\n                    <ListItemText>Заявки</ListItemText>\n                </ListItem>\n            </List>\n            </div>\n            </div>\n        </Drawer>\n        {current}\n    </div>\n    );\n}","import React from 'react'\nimport {TextField, Button, Snackbar, Typography, Box } from '@material-ui/core'\nimport MuiAlert from '@material-ui/lab/Alert'\nimport axios from 'axios'\nimport {observer} from 'mobx-react'\nimport history from '../history.js';\nimport serverHost from '../config.js';\nimport { withStyles} from '@material-ui/core/styles';\nimport userStore from '../store/userStore.js'\n\nfunction Alert(props) {\n    return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n  }\n\nconst styles = theme => ({\n    root: {\n        textAlign: 'center',\n        marginTop: theme.spacing(4),\n    },\n    border: {\n        border: \"medium\",\n    },\n    button: {\n        width: \"200px\",\n        backgroundColor: theme.backgroundColor,\n    }\n})\n\nconst LoginForm = observer(\n    class LoginForm extends React.Component{\n\n        constructor(props){\n            //console.log(props);\n            super(props);\n            \n            \n            this.state = {\n                password: '',\n                email: '',\n                succees_text: '',\n                error_text: '',\n            }\n            this.handleInput = this.handleInput.bind(this);\n            this.handleSubmit = this.handleSubmit.bind(this);\n            this.successSend = this.successSend.bind(this)\n            \n            this.errorMessage = '';\n            this.successMessage = '';\n        }\n\n        successSend(response){\n            userStore.setUser(response.data.token);\n            userStore.setIsAuth(true);\n            this.setState({succees_text: \"Запись успешно создана\"});\n        }\n\n        async handleSubmit(event){\n            event.preventDefault();\n            try{\n                var data = await axios.post(serverHost + \"api/user/login\", this.state)\n                userStore.setUser(data.data.token);\n                userStore.setIsAuth(true);\n                this.setState({succees_text: \"Запись успешно создана\"});\n            }\n            catch(e){\n                //console.log(\"error\", e);\n                var json = JSON.parse(e.request.response);\n                this.setState({error_text: json.data});\n            }\n        }\n\n        handleInput(event){\n            var target = event.target;\n            var value = target.value;\n            var name = target.name;\n            this.setState({\n                [name]: value\n            })\n        }\n\n        render(){\n            const {classes} = this.props;\n            return (<form className={classes.root} onSubmit={this.handleSubmit}>\n            <Typography variant=\"h2\" gutterBottom>\n                Log in\n            </Typography>\n                <Snackbar open={this.state.error_text !== ''} autoHideDuration={6000} onClose={(event, reason) => {\n                    if (reason === 'clickaway') {\n                return;\n                }\n                this.setState({\n                    error_text: '',\n                });\n                }}>\n                    <Alert severity=\"error\">\n                    {this.state.error_text}\n                    </Alert>\n                </Snackbar>\n                <Box borderRadius={16} borderColor=\"grey.500\" border={1} px={5} pb={2} m=\"auto\" width=\"500px\" >\n                    <div>\n                        <TextField fullWidth margin=\"normal\"  name=\"email\" id=\"email\" label=\"E-mail\" value={this.state.email} onChange={this.handleInput} />\n                    </div>\n                    <div>\n                    <TextField fullWidth style={{marginBottom: 10}} margin=\"auto\"   name=\"password\" id=\"password\" label=\"Password\" type=\"password\" value={this.state.password} onChange={this.handleInput} />\n                    </div>\n                    \n                    \n                    <Button className={classes.button} size=\"large\" variant=\"contained\" color=\"primary\" type=\"submit\">\n                        Войти\n                    </Button>\n                </Box>\n            </form>)\n        }\n})\n\nexport default withStyles(styles)(LoginForm);","import { makeAutoObservable } from \"mobx\";\n\nexport class ThemeStore{\n    constructor() {\n        this.theme = {};\n        makeAutoObservable(this);\n    }\n\n    setTheme(theme){\n        this.theme = theme;\n    }\n}\n\nexport default new ThemeStore();","import React from 'react';\nimport { Switch } from '@material-ui/core';\nimport themeStore from '../store/themeStore';\nimport { observer } from 'mobx-react';\nimport { createMuiTheme } from '@material-ui/core';\n\nconst useStyles = createMuiTheme()\n\nexport default observer(function(){\n    const [check, setCheck] = React.useState(false)\n    //const classes = useStyles();\n    const handleChange = e => {\n        setCheck(!check);\n        //console.log(check);\n        if (!check) {\n            themeStore.setTheme({\n                palette: {\n                    primary: {\n                        main: 'rgb(199, 142, 255)',\n                        contrastText: '#fff',\n                    },\n                    secondary: {\n                        main: '#a140ff',\n                        contrastText: '#fff',\n                    }\n                }\n            });\n        }\n        else {\n            themeStore.setTheme({});\n        }\n    }\n\n    return (\n        <Switch\n        checked={check}\n        onChange={handleChange}\n        inputProps={{'aria-label': 'переключить тему'}}\n        \n        />\n    )\n})","import React from \"react\";\nimport { Badge, IconButton, Popper, Typography, makeStyles, Paper, List, ListItem, \n    ClickAwayListener, Fade, Box, ListItemText, Divider, Button } from \"@material-ui/core\";\nimport NotificationsIcon from '@material-ui/icons/Notifications';\nimport userStore from \"../store/userStore\";\nimport { observer, inject } from \"mobx-react\";\nimport { useSnackbar } from \"notistack\";\nimport { autorun } from \"mobx\";\nimport axios from \"axios\";\nimport serverHost from \"../config\";\n\nconst useStyles = makeStyles(theme => ({\n    popper: {\n        zIndex: theme.zIndex.tooltip + 100,\n        width: 600,\n        textAlign: 'center',\n        padding: theme.spacing(2),\n    },\n    list: {\n        overflow: 'auto',\n        maxHeight: 600,\n    }\n}))\n\nvar displayed = [];\n\nconst Alert = observer(() => {\n    const {enqueueSnackbar, closeSnackbar} = useSnackbar();\n\n    const storeDisplayed = (id) => {\n        displayed = [...displayed, id];\n    };\n    const action = key => (\n        <React.Fragment>\n            <Button onClick={() => {closeSnackbar(key)}} style={{color: 'white'}}>Закрыть</Button>\n        </React.Fragment>\n    );\n    autorun(() => {\n        //console.log(\"alerts\");\n    //console.log(\"snackbars\", userStore.snackbars, userStore.snackbars.length);\n    userStore.snackbars.forEach(snackbar => {\n        //console.log(snackbar.key, displayed);\n        if (displayed.includes(snackbar.key)) return;\n        //console.log(\"aboba\", snackbar);\n        enqueueSnackbar(snackbar.message, {...snackbar.options, action});\n        storeDisplayed(snackbar.key);\n        userStore.removeSnackbar(snackbar.key);\n    });\n    //userStore.setSnackbars([]);\n    })\n    \n    \n    return (null);\n})\n\nexport default observer(function NotificationView(){\n    const [anchorEl, setAnchorEl] = React.useState(null);\n    const [open, setOpen] = React.useState(true);\n    const classes = useStyles();\n\n    const onButton = e => {\n        axios.post(serverHost + 'api/user/read', {}, {\n            headers: {\n                \"Authorization\": \"Baerar \" + userStore.token,\n            }\n        }).then(data => {}).catch(e => {console.log(e)});\n        userStore.setCount(0);\n        setAnchorEl(e.currentTarget);\n        setOpen(!open);\n        if (!open) setAnchorEl(null);\n    }\n\n    const onClose = e => {\n        setAnchorEl(null);\n    }\n\n    const onClickAway = e => {\n        //console.log(open, anchorEl);\n        if (open) return;\n        setAnchorEl(null);\n        setOpen(true);\n    }\n\n    const dateString = m => {\n        var dateString =\n        m.getUTCFullYear() + \"/\" +\n        (\"0\" + (m.getUTCMonth()+1)).slice(-2) + \"/\" +\n        (\"0\" + m.getUTCDate()).slice(-2) + \" \" +\n        (\"0\" + m.getUTCHours()).slice(-2) + \":\" +\n        (\"0\" + m.getUTCMinutes()).slice(-2) + \":\" +\n        (\"0\" + m.getUTCSeconds()).slice(-2);\n        return dateString;\n    }\n\n    return(\n        <React.Fragment>\n        <ClickAwayListener onClickAway={onClickAway}>\n        <Box display=\"inline\">\n        <IconButton onClick={onButton} style={{color: 'white'}}>\n            <Badge color=\"secondary\" badgeContent={userStore.count} max={99}>\n                <NotificationsIcon />\n            </Badge>\n        </IconButton>\n        \n            <Popper\n            className={classes.popper}\n            anchorEl={anchorEl}\n            open={Boolean(anchorEl)}\n            transition\n            anchorOrigin={{\n                vertical: 'bottom',\n                horizontal: 'center',\n            }}\n            onClose={onClose}>\n            {({TransitionProps}) => (\n                <Fade {...TransitionProps} timeout={350}>\n                    <Paper>\n                        <List className={classes.list}>\n                        {userStore.notifications.slice().reverse().map(elem => (\n                            <React.Fragment>\n                                <ListItem button>\n                                    <ListItemText primary={elem.text}\n                                    secondary={dateString(new Date(elem.date))}\n                                    />\n                                </ListItem>\n                                <Divider />\n                            </React.Fragment>\n                        ))}\n                            \n                        </List>\n                    </Paper>\n                </Fade>\n            )}\n            \n            </Popper>\n            </Box>\n        </ClickAwayListener>\n        <Alert />\n        </React.Fragment>\n    )\n})","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton'\nimport Link from '@material-ui/core/Link'\nimport AddIcon from '@material-ui/icons/Add';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport history from '../history.js'\nimport { Link as BrowserLink } from 'react-router-dom';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport { Menu, MenuItem } from '@material-ui/core';\nimport userStore from '../store/userStore.js';\nimport ThemeSwitch from './themeSwitch.js';\nimport NotificationView from './notificationsView.js';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    zIndex: 1300,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  title: {\n    flexGrow: 1,\n  },\n}));\n\nexport default function NavBar() {\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = React.useState(null);\n\n  const handleCloseMenu = () => {\n    setAnchorEl(null);\n  }\n\n  const handleProfileMenu = (event) => {\n    setAnchorEl(event.currentTarget);\n  }\n\n  return (\n      <AppBar position=\"fixed\" className={classes.root}>\n        <Toolbar>\n          <Typography variant=\"h6\" className={classes.title}>\n                <Link component={BrowserLink} to=\"/\" color='inherit'>Главная</Link>\n          </Typography>\n          <div>\n            <ThemeSwitch />\n            {(userStore.isAuth) && <NotificationView />}\n            {(userStore.isAuth && userStore.user.roles.includes(\"ADMIN\")) && <IconButton component={BrowserLink} to=\"/admin\" className={classes.title} aria-label=\"админ-панель\" style={{color: 'white'}}>\n                <SettingsIcon />\n            </IconButton>}\n\n          {userStore.isAuth && <IconButton className={classes.title} component={BrowserLink} to=\"/request\" aria-label=\"подать заявку\" style={{color: 'white'}}>\n                <AddIcon/>\n            </IconButton>}\n          {!userStore.isAuth ? (<React.Fragment><Button component={BrowserLink} to=\"/login\" color=\"inherit\">Log in</Button>\n          <Button color=\"inherit\" component={BrowserLink} to=\"/registration\">Sign in</Button></React.Fragment>) : <React.Fragment>\n            <IconButton\n              color=\"inherit\"\n              onClick={handleProfileMenu}>\n              <AccountCircle />\n            </IconButton>\n          </React.Fragment>}\n          </div>\n            \n        </Toolbar>\n        <Menu\n        id=\"account-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={Boolean(anchorEl)}\n        onClose={handleCloseMenu}\n        >\n          <MenuItem onClick={() => {\n            userStore.setIsAuth(false);\n            setAnchorEl(false);\n          }}>\n            Выйти\n          </MenuItem>\n        </Menu>\n      </AppBar>\n  );\n}","import {Container, Toolbar} from '@material-ui/core';\nimport RegistrationForm from './components/registrationForm.js';\nimport RequestForm from './components/requestForm.js';\nimport MainPage from './components/main.js';\nimport AdminPanel from './components/admin/index.js';\nimport {HashRouter, Switch, Route, Link, Redirect} from \"react-router-dom\";\nimport React from 'react';\nimport {observer, Provider} from 'mobx-react';  \nimport  LoginForm from './components/loginForm.js';\nimport history from './history.js';\nimport NavBar from './components/navBar.js';\nimport UserStore from './store/userStore.js';\nimport {Button} from '@material-ui/core';\nimport userStore from './store/userStore.js';\nimport axios from 'axios';\nimport serverHost from './config.js';\nimport userCard from './components/admin/userCard.js';\nimport { ThemeProvider, createMuiTheme } from '@material-ui/core/styles';\nimport themeStore from './store/themeStore.js';\n\nexport const App = observer( \n() => {\n    React.useEffect(async() => {\n      //console.log(userStore);\n      if (!userStore.isAuth) return;\n      axios.get(serverHost + 'api/user/check', {headers: {\n        \"Authorization\" : \"Baerar \" + userStore.token,\n      }}).then(data => {\n        //console.log(data);\n        userStore.setUser(data.data.token);\n      }).catch(e => {\n        if (e.response.status == \"403\"){\n          userStore.setIsAuth(false);\n      }\n        console.log(e.response);\n      });\n      \n      \n      //  socket.emit(\"connection\", \"hello\");\n    }, [])\n    //console.log(\"a\", userStore);\n    return (\n    <ThemeProvider theme={createMuiTheme(themeStore.theme)}>\n    <div>\n      <NavBar />\n      <Container maxWidth=\"xl\">\n      <Toolbar />\n        <Switch>\n            \n            <Route path='/registration'>\n              {!userStore.isAuth ? <RegistrationForm /> : <Redirect to=\"/\" />}\n            </Route>\n            <Route path='/login'>\n            {!userStore.isAuth ? <LoginForm /> : <Redirect to=\"/\" />}\n            </Route>\n            <Route path='/request'>\n            {userStore.isAuth ? <RequestForm /> : <Redirect to=\"/\" />} \n            </Route>\n            <Route path='/admin'>\n              {(userStore.isAuth && userStore.user.roles.includes(\"ADMIN\")) ? <AdminPanel /> : <Redirect to=\"/\" />}\n            </Route>\n            <Route path='/'>\n              <MainPage />\n            </Route>\n          </Switch>\n      </Container>\n      </div>\n      </ThemeProvider>\n    );\n  })\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {App} from './App';\nimport SubjectStore from './store/subjectStore.js';\nimport UserStore from './store/userStore';\nimport {MuiPickersUtilsProvider} from '@material-ui/pickers';\nimport DateFnsUtils from '@date-io/date-fns';\nimport { HashRouter } from 'react-router-dom';\nimport {ThemeProvider, createMuiTheme} from '@material-ui/core/styles';\nimport { SnackbarProvider } from 'notistack'\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: 'rgb(199, 142, 255)',\n      contrastText: '#fff',\n    }\n  }\n})\n\nReactDOM.render(\n  <React.StrictMode>\n  <HashRouter basename='/'>\n  <MuiPickersUtilsProvider utils={DateFnsUtils}>\n    <SnackbarProvider>\n      <App />\n    </SnackbarProvider>\n    </MuiPickersUtilsProvider>\n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}